(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),u=t.n(c),o=t(5),l=t(2),i=t(4),m=function(e){var n=e.values,t=e.addContact,a=e.handleChange;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"name: "),r.a.createElement("input",{type:"text",name:"name",value:n.name,onChange:a})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"number"},"number: "),r.a.createElement("input",{type:"tel",name:"number",value:n.number,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.searchTerm,t=e.handleSearch;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"search"},"search contact: "),r.a.createElement("input",{type:"search",name:"search",value:n,onChange:t}))},d=function(e){var n=e.contact,t=e.handleRemove;return r.a.createElement("li",null,r.a.createElement("span",null,null===n||void 0===n?void 0:n.name)," ",r.a.createElement("span",null,null===n||void 0===n?void 0:n.number),r.a.createElement("button",{onClick:function(){return t(n.id)}},"X"))},f=function(e){var n=e.contacts,t=e.handleRemove;return r.a.createElement("ul",null,null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(d,{key:null===e||void 0===e?void 0:e.id,contact:e,handleRemove:t})})))},b=function(e){var n=e.title;return r.a.createElement("h2",null,n)},h=function(e){var n=e.message,t=n.error,a=n.success;return r.a.createElement("div",{className:"toast"},(t||a)&&r.a.createElement("h3",{className:t?"error":"success"},t||a))},v=t(3),E=t.n(v),p="/api/persons",j=function(){return E.a.get(p)},O=function(e){return E.a.post(p,e).then((function(e){return e.data})).catch((function(e){return e.response.data}))},g=function(e){return E.a.delete("".concat(p,"/").concat(e))},y=function(e,n){return E.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},k=function(e){var n=e.obj,t=JSON.stringify(n,null,2);return r.a.createElement("div",null,"Form: ",t)},C=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)({name:"",number:""}),d=Object(i.a)(u,2),v=d[0],E=d[1],p=Object(a.useState)(""),C=Object(i.a)(p,2),S=C[0],w=C[1],T=Object(a.useState)({error:null,success:null}),F=Object(i.a)(T,2),N=F[0],R=F[1];Object(a.useEffect)((function(){j().then((function(e){return c(e.data)}))}),[]);var J=null===t||void 0===t?void 0:t.filter((function(e){return null===e||void 0===e?void 0:e.name.toLowerCase().includes(S.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement(b,{title:"Phonebook"}),r.a.createElement(s,{searchTerm:S,handleSearch:function(e){w(e.target.value)}}),r.a.createElement(h,{message:N}),r.a.createElement(m,{values:v,addContact:function(e){e.preventDefault();var n={name:v.name,number:v.number},a=null===t||void 0===t?void 0:t.find((function(e){return e.name===n.name}));if(a&&window.confirm("".concat(v.name," is already added to phonebook, replace the old number with the new one?"))){var r=Object(l.a)({},a,{number:n.number});y(a.id,r).then((function(e){c(t.map((function(n){return n.id===a.id?e:n}))),R(Object(l.a)({},N,{success:"Successfully updated contact ".concat(e.name)})),setTimeout((function(){return R({error:null,success:null})}),3e3)})).catch((function(e){R(Object(l.a)({},N,{error:e.message})),setTimeout((function(){return R({error:null,success:null})}),3e3)})),E({name:"",number:""})}O(n).then((function(e){e.error?(R(Object(l.a)({},N,{error:e.error})),setTimeout((function(){return R({error:null,success:null})}),3e3)):(c(t.concat(e)),R(Object(l.a)({},N,{success:"Succesfully added ".concat(e.name," to the phonebook")})),setTimeout((function(){return R({error:null,success:null})}),3e3))})),E({name:"",number:""})},handleChange:function(e){E(Object(l.a)({},v,Object(o.a)({},e.target.name,e.target.value)))}}),r.a.createElement(b,{title:"Numbers"}),r.a.createElement(f,{contacts:J,handleRemove:function(e){var n=t.find((function(n){return n.id===e}));g(e,n).then((function(e){return R(Object(l.a)({},N,{success:"".concat(n.name," is successfully removed from phonebook.")})),setTimeout((function(){return R({error:null,success:null})}),3e3),e.data})).catch((function(e){R(Object(l.a)({},N,{error:"".concat(n.name," is already removed from the phonebook")})),setTimeout((function(){return R({error:null,success:null})}),3e3)})),c(t.filter((function(n){return n.id!==e})))}}),r.a.createElement(k,{obj:N}))};t(38);u.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.ad1369a6.chunk.js.map